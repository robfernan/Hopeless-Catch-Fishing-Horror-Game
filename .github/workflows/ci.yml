name: CI

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  web-version-check:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
    
    - name: Check HTML file exists
      run: |
        if [ ! -f "HTML_CSS_JS/index.html" ]; then
          echo "Error: index.html not found"
          exit 1
        fi
        echo "✓ HTML file exists"
        
    - name: Check JavaScript files exist
      run: |
        if [ ! -d "HTML_CSS_JS/src" ]; then
          echo "Error: src directory not found"
          exit 1
        fi
        echo "✓ JavaScript source directory exists"
        
    - name: Check assets exist
      run: |
        if [ ! -d "HTML_CSS_JS/assets" ]; then
          echo "Error: assets directory not found"
          exit 1
        fi
        echo "✓ Assets directory exists"

  love2d-version-check:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
    
    - name: Check Love2D files exist
      run: |
        if [ ! -f "Love2d Version/HopelessCatch.love" ]; then
          echo "Error: HopelessCatch.love file not found"
          exit 1
        fi
        
        if [ ! -d "Love2d Version/HopelessCatch_Source" ]; then
          echo "Error: Source directory not found"
          exit 1
        fi
        
        echo "Love2D version check passed"
        
    - name: Check Lua syntax (basic)
      run: |
        cd "Love2d Version/HopelessCatch_Source"
        # Check if main.lua exists
        if [ ! -f "main.lua" ]; then
          echo "Error: main.lua not found"
          exit 1
        fi
        
        echo "Lua files check passed"

  documentation-check:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
    
    - name: Check required documentation
      run: |
        required_files=(
          "README.md"
          "LICENSE"
          "CONTRIBUTING.md"
          "HTML_CSS_JS/README.md"
          "HTML_CSS_JS/DEVELOPER_GUIDE.md"
        )
        
        for file in "${required_files[@]}"; do
          if [ ! -f "$file" ]; then
            echo "Error: Required file $file not found"
            exit 1
          fi
        done
        
        echo "✓ All required documentation files present"